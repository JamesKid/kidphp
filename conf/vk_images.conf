# nginx配置文件
server {
	listen   80;
	charset utf-8;

	server_name images.vimkid.com;
	index index.php index.html index.htm;

	root    /var/www/vk_images/;
	
	location / {
		root   /var/www/vk_images;
		index   index.php;
		if (!-e $request_filename){
			rewrite ^/(.*)$ /index.php/$1 last;
		}
	}

	include fastcgi.conf; #Php Generic Config

	location ~ /\.ht {
		deny  all;
	}

	location ~ ^/htanginx$ {
		deny  all;
	}

	location ^~ /system/core {
		deny  all;
	}

	location ~* \.(ttf|ttc|otf|eot|woff)$ {
			add_header Cache-Control "public";
			add_header Access-Control-Allow-Origin *;
			expires 3h;
			access_log off;
	}

	location ~* .*\.(gif|jpg|jpeg|png|bmp|swf|ico|tif)$ {
		expires 7d;
	}

	location ~* .*\.(mp3|wav|wma|vox|ogg)?$ {
		expires 30d;  #设置缓存时间
	} 

	location ~* .*\.(js|css)?$ {
		expires 3h; #设置缓存时间
	} 

	error_page 403 /status/403.html;
	location = /status/403.html {
		root   /var/www/vimkid;
	}

	error_page 500 /status/500.html;
	location = /status/500.html {
		root   /var/www/vimkid;
	}

	error_page 502 /status/502.html;
	location = /status/502.html {
		root   /var/www/vimkid;
	}

	error_page 503 /status/503.html;
	location = /status/503.html {
		root   /var/www/vimkid;
	}
}
